# ============================================
#        EUREKA - K8S PRODUCTION
# ============================================

server.port=8761

# --- Peer Discovery ---
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true

eureka.client.service-url.defaultZone=${EUREKA_PEER_URLS}

# --- Instance ---
eureka.instance.hostname=${EUREKA_HOSTNAME}
eureka.instance.prefer-ip-address=false
eureka.instance.instance-id=${spring.application.name}:${EUREKA_HOSTNAME}:${server.port}

# Lease timings
eureka.instance.lease-renewal-interval-in-seconds=15
eureka.instance.lease-expiration-duration-in-seconds=45

# Metadata
eureka.instance.metadata-map.cluster=eureka-cluster
eureka.instance.metadata-map.zone=${EUREKA_ZONE}

# --- Server tuning ---
eureka.server.enable-self-preservation=true
eureka.server.renewal-percent-threshold=0.85
eureka.server.eviction-interval-timer-in-ms=60000
eureka.server.renewal-threshold-update-interval-ms=900000

# Peer communication
eureka.server.peer-node-read-timeout-ms=2000
eureka.server.peer-node-connect-timeout-ms=2000
eureka.server.peer-eureka-nodes-update-interval-ms=600000
eureka.server.peer-eureka-status-refresh-time-interval-ms=30000

# Response cache
eureka.server.response-cache-auto-expiration-in-seconds=180
eureka.server.response-cache-update-interval-ms=30000
eureka.server.use-read-only-response-cache=true

# Delta sync
eureka.server.disable-delta=false
eureka.server.delta-retention-timer-interval-in-ms=30000
eureka.server.retention-time-in-m-s-in-delta-queue=180000

# Sync
eureka.server.wait-time-in-ms-when-sync-empty=5000
eureka.server.registry-sync-retries=5
eureka.server.registry-sync-retry-wait-ms=500
eureka.server.max-threads-for-peer-replication=20
eureka.server.max-elements-in-peer-replication-pool=10000

# --- Security ---
spring.security.user.name=${EUREKA_USERNAME}
spring.security.user.password=${EUREKA_PASSWORD}

# --- Logging ---
logging.level.root=WARN
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN
logging.level.com.netflix.eureka=WARN
logging.level.com.netflix.discovery=WARN